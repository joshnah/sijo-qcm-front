import{a as St}from"./chunk-PN42V55X.js";import{a as at}from"./chunk-CVNQIEP5.js";import{a as lt,h as mt,i as dt,j as ut,k as ct,l as pt,m as gt,o as Ct,p as bt}from"./chunk-VFGGV667.js";import{c as rt,d as j,g as A,j as B}from"./chunk-2F7DOR6P.js";import{a as Q}from"./chunk-AJCI4IHL.js";import{f as st}from"./chunk-QDBR6KCD.js";import{Bb as k,Cb as M,Db as V,Eb as N,Fb as D,Gb as _,Ia as r,Kb as R,L as q,Lb as it,Mb as $,Pa as E,S as X,Sa as f,Tb as nt,Xa as c,bb as C,ca as S,eb as v,ec as ot,fc as O,gb as Z,hb as tt,ib as s,ja as p,jb as e,ka as g,kb as F,lb as x,nb as y,ob as m,ua as Y,va as I,wb as et,xb as a,yb as b,zb as u}from"./chunk-I64YHXKP.js";var xt=(n,i)=>i.codingSubmissionId;function _t(n,i){if(n&1){let t=x();s(0,"button",2),y("click",function(){let l=p(t).$implicit,d=m();return g(d.onSubmissionClick(l))}),s(1,"div",3)(2,"h5",4),a(3),e(),s(4,"small"),a(5),R(6,"date"),e()(),s(7,"p",4),a(8),e(),s(9,"small"),a(10),e()()}if(n&2){let t=i.$implicit;r(3),u("Submission #",t.codingSubmissionId,""),r(2),b($(6,4,t.createdAt,"short")),r(3),u("Language: ",t.language,""),r(2),u(" Score: ",t.score*100,"/100")}}var P=class n{codingQuestionsService=S(Q);questionId=I.required();codingSubmissions$;submissionSelected=Y();constructor(){this.codingSubmissions$=lt(this.questionId).pipe(X(i=>this.codingQuestionsService.fetchAllSubmissionsByQuestion(i)))}onSubmissionClick(i){this.submissionSelected.emit(i)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-coding-submissions-list"]],inputs:{questionId:[1,"questionId"]},outputs:{submissionSelected:"submissionSelected"},decls:4,vars:2,consts:[[1,"list-group"],["type","button",1,"list-group-item","list-group-item-action"],["type","button",1,"list-group-item","list-group-item-action",3,"click"],[1,"d-flex","w-100","justify-content-between"],[1,"mb-1"]],template:function(t,o){t&1&&(s(0,"div",0),Z(1,_t,11,7,"button",1,xt),R(3,"async"),e()),t&2&&(r(),tt(it(3,0,o.codingSubmissions$)))},dependencies:[ot,O],encapsulation:2,changeDetection:0})};function ht(n,i){if(n&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),a(6,"Submission Details"),e()(),s(7,"div",5)(8,"h5",6),a(9),e(),s(10,"div",7)(11,"strong"),a(12,"Submitted on:"),e(),a(13),R(14,"date"),e(),s(15,"div",7)(16,"strong"),a(17,"Score:"),e(),a(18),e(),s(19,"div",7)(20,"strong"),a(21,"Language:"),e(),a(22),e(),s(23,"div",7)(24,"strong"),a(25,"User Code:"),e(),s(26,"pre",8),a(27),e()()()(),s(28,"div",9)(29,"div",4)(30,"h5"),a(31,"Additional Information"),e()(),s(32,"ul",10)(33,"li",11)(34,"strong"),a(35,"Question ID:"),e(),a(36),e(),s(37,"li",11)(38,"strong"),a(39,"User ID:"),e(),a(40),e()()()(),s(41,"div",12)(42,"div",3)(43,"div",4)(44,"h5"),a(45,"Actions"),e()(),s(46,"div",5)(47,"button",13),a(48," Download Code "),e(),s(49,"button",14),a(50," Review Submission "),e()()()()()()),n&2){m();let t=_(0);r(9),u(" Submission ID: ",t.codingSubmissionId," "),r(4),u(" ",$(14,7,t.createdAt,"medium")," "),r(5),u(" ",t.score*100,"/100 "),r(4),u(" ",t.language," "),r(5),u("",t.userCode,`
            `),r(9),u(" ",t.questionId," "),r(4),u(" ",t.userId," ")}}var W=class n{submissionInput=I();static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-coding-submission-details"]],inputs:{submissionInput:[1,"submissionInput"]},decls:2,vars:2,consts:[[1,"container","mt-4",2,"height","500px"],[1,"row"],[1,"col-md-8"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"mb-3"],[1,"bg-light","p-3"],[1,"card","mt-3"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"col-md-4"],[1,"btn","btn-primary","btn-block","mb-2"],[1,"btn","btn-success","btn-block","mb-2"]],template:function(t,o){if(t&1&&(N(0),c(1,ht,51,10,"div",0)),t&2){let l=D(o.submissionInput());r(),v(l?1:-1)}},dependencies:[O],encapsulation:2,changeDetection:0})};function Et(n,i){if(n&1&&(s(0,"div",2)(1,"h5",9),a(2,"Compile Errors"),e(),s(3,"pre",10),a(4),e()()),n&2){m(2);let t=_(10);r(4),b(t.compile_output)}}function yt(n,i){if(n&1&&(s(0,"div",2)(1,"h5",11),a(2,"Stdout"),e(),s(3,"pre",10),a(4),e()(),s(5,"div",2)(6,"h5",12),a(7,"Stderr"),e(),s(8,"pre",10),a(9),e()()),n&2){m(2);let t=_(10);r(4),b(t.stdout),r(5),b(t.stderr)}}function wt(n,i){if(n&1&&(s(0,"div",7),c(1,Et,5,1,"div",2)(2,yt,10,2),e()),n&2){let t=m();r(),v(t.hasErrorCompilation()?1:2)}}function Lt(n,i){n&1&&(s(0,"div",8)(1,"span",13),a(2,"Loading..."),e()())}var H=class n{code=I("");exampleInput=I();codingQuestionsService=S(Q);output=E(null);stdin=nt(()=>this.exampleInput());loading=E(!1);executeCode(){this.loading.set(!0),this.codingQuestionsService.executeCode(this.code(),"java",this.stdin()).pipe(q(()=>{this.loading.set(!1)})).subscribe(i=>{console.log(i),this.output.set(i)})}hasErrorCompilation(){return this.output()?.status?.id===6}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-code-run"]],inputs:{code:[1,"code"],exampleInput:[1,"exampleInput"]},decls:13,vars:4,consts:[[1,"container"],[1,"bg-light","p-3"],[1,"mb-3"],[1,"form-group"],["for","testCaseInput"],["id","testCaseInput","rows","3",1,"form-control",3,"ngModelChange","placeholder","ngModel"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"bg-dark","text-white","p-4","rounded","shadow-sm","mt-4"],["role","status",1,"spinner-border","text-primary"],[1,"text-danger"],[1,"bg-light","text-dark","p-3","rounded"],[1,"text-success"],[1,"text-warning"],[1,"visually-hidden"]],template:function(t,o){if(t&1){let l=x();s(0,"div",0)(1,"div",1)(2,"h5",2),a(3,"Test Case Input"),e(),s(4,"div",3)(5,"label",4),a(6,"Enter Test Case Input:"),e(),s(7,"textarea",5),V("ngModelChange",function(T){return p(l),M(o.stdin,T)||(o.stdin=T),g(T)}),e()(),s(8,"button",6),y("click",function(){return p(l),g(o.executeCode())}),a(9," Run Code "),e()(),N(10),c(11,wt,3,1,"div",7)(12,Lt,3,0,"div",8),e()}if(t&2){r(7),C("placeholder",o.exampleInput()),k("ngModel",o.stdin),r(3);let l=D(o.output());r(),v(l?11:o.loading()?12:-1)}},dependencies:[B,rt,j,A],encapsulation:2,changeDetection:0})};var J=class{static generateJavaCode(i,t){let o="",{arguments:l,returnType:d}=t;o+=`import java.util.*;

`;let T=l.map(L=>`${L.type} ${L.name}`).join(", ");o+=`class Solution {
    public ${d} ${i.functionName}(${T}) {
        // TODO: Implement this function
        return null; // Replace with appropriate return value
    }
}
`,o+=`public class Main {
`,o+=`    public static void main(String[] args) {
`,o+=`        Scanner scanner = new Scanner(System.in);
`;let U=i.functionSignatures.find(L=>L.language==="java");if(!U)throw new Error("No Java function signature found");let vt=U.arguments,w="";return vt.forEach(L=>{let{type:K,name:h}=L;switch(K){case"List<Integer>":w+=`
        String listInput = scanner.nextLine().trim();
        List<Integer> ${h} = new ArrayList<>();
        listInput = listInput.substring(1, listInput.length() - 1); // Remove brackets
        if (!listInput.isEmpty()) {
            for (String num : listInput.split(",")) {
                ${h}.add(Integer.parseInt(num.trim()));
            }
        }
          `;break;case"Integer":case"int":w+=`        int ${h} = Integer.parseInt(scanner.nextLine().trim());
`;break;case"boolean":w+=`        boolean ${h} = Boolean.parseBoolean(scanner.nextLine().trim());
`;break;case"String":w+=`        String ${h} = scanner.nextLine().trim();
`;break;case"List<String>":w+=`
        String listInputStr = scanner.nextLine().trim();
        List<String> ${h} = new ArrayList<>();
        listInputStr = listInputStr.substring(1, listInputStr.length() - 1); // Remove brackets
        if (!listInputStr.isEmpty()) {
            for (String str : listInputStr.split(",")) {
                ${h}.eadd(str.trim());
            }
        }
          `;break;default:throw new Error(`Unsupported argument type: ${K}`)}}),o+=w,o+=`        Solution solution = new Solution();
`,o+=`        ${this.generateFunctionCall(U,i.functionName)}
`,o+=`    }
`,o+=`}
`,o}static generateFunctionCall(i,t){let o=`${i.returnType} result = solution.${t}(`;return i.arguments.forEach((l,d)=>{o+=l.name,d<i.arguments.length-1&&(o+=", ")}),o+=`);
`,o+="        System.out.println(result);",o}};function Nt(n,i){if(n&1&&(s(0,"h2",18),a(1),e(),s(2,"div",19)(3,"div",20)(4,"p",12),a(5),e()()()),n&2){m(2);let t=_(0);r(),b(t.title),r(4),b(t.description)}}function Dt(n,i){if(n&1){let t=x();s(0,"app-coding-submissions-list",21),y("submissionSelected",function(l){p(t);let d=m(2);return g(d.selectSubmission(l))}),e()}if(n&2){m(2);let t=_(0);C("questionId",t.id)}}function Qt(n,i){if(n&1&&F(0,"app-coding-submission-details",22),n&2){let t=m(2);C("submissionInput",t.currentSubmission())}}function Tt(n,i){n&1&&(s(0,"div",13)(1,"span",23),a(2,"Loading..."),e()())}function kt(n,i){if(n&1){let t=x();s(0,"button",24),y("click",function(){p(t);let l=m(2);return g(l.submitSolution())}),a(1," Submit Solution "),e()}}function Mt(n,i){if(n&1){let t=x();s(0,"div",1)(1,"div",2)(2,"ul",3,0),V("activeIdChange",function(l){p(t);let d=m();return M(d.active,l)||(d.active=l),g(l)}),s(4,"li",4)(5,"button",5),a(6,"Description"),e(),c(7,Nt,6,2,"ng-template",6),e(),s(8,"li",7)(9,"button",5),a(10,"History"),e(),c(11,Dt,1,1,"ng-template",6),e(),s(12,"li",8)(13,"button",5),a(14,"Submissions"),e(),c(15,Qt,1,1,"ng-template",6),e()(),F(16,"div",9),e(),s(17,"div",10)(18,"div",11)(19,"h5",12),a(20,"Code Editor"),e(),c(21,Tt,3,0,"div",13)(22,kt,2,0,"button",14),e(),s(23,"div",15)(24,"ngx-monaco-editor",16),V("ngModelChange",function(l){p(t);let d=m();return M(d.code,l)||(d.code=l),g(l)}),e()(),F(25,"app-code-run",17),e()()}if(n&2){let t=et(3),o=m();r(2),C("destroyOnHide",!1),k("activeId",o.active),r(14),C("ngbNavOutlet",t),r(5),v(o.isSubmitting()?21:22),r(3),C("options",o.editorOptions),k("ngModel",o.code),r(),C("code",o.code)("exampleInput",o.createExampleInput())}}var ft=class n{codingQuestionsService=S(Q);alertService=S(at);codingQuestion=E(null);active="description";currentSubmission=E(null);isSubmitting=E(!1);route=S(st);ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&this.codingQuestionsService.getCodingQuestion(i).subscribe(t=>{this.codingQuestion.set(t),this.code=this.generateFunctionTemplate(t,"java")})}editorOptions={language:"java"};code="";submitSolution(){this.codingQuestion&&(this.isSubmitting.set(!0),this.codingQuestionsService.submitCodingQuestion(this.codingQuestion().id,"java",this.code).pipe(q(()=>{this.isSubmitting.set(!1)})).subscribe({next:i=>{this.alertService.setMessage({type:"success",message:"Code has been submitted"}),this.selectSubmission(i)}}))}createExampleInput(){return this.codingQuestion()?.testCases[0]?.input}selectSubmission(i){this.currentSubmission.set(i),this.navigateToSubmissionTab()}generateFunctionTemplate(i,t){let o=i.functionSignatures.find(l=>l.language.toLowerCase()===t.toLowerCase());if(!o)throw new Error(`Function signature not found for language: ${t}`);return J.generateJavaCode(i,o)}navigateToSubmissionTab(){this.active="submission-detail"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-coding-question-start"]],decls:2,vars:2,consts:[["nav","ngbNav"],[1,"container-fluid","h-100","row"],[1,"col-md-6","bg-light","overflow-auto"],["ngbNav","",1,"nav-tabs",3,"activeIdChange","destroyOnHide","activeId"],["ngbNavItem","description"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","submissions-list"],["ngbNavItem","submission-detail"],[1,"mt-2",3,"ngbNavOutlet"],[1,"col-md-6","d-flex","flex-column","overflow-auto"],[1,"bg-dark","text-white","p-3","d-flex","align-items-center","justify-content-between"],[1,"mb-0"],["role","status",1,"spinner-border","text-primary"],[1,"btn","btn-success"],[1,"overflow-auto","h-50"],[1,"h-100","w-100",3,"ngModelChange","options","ngModel"],[3,"code","exampleInput"],[1,"mb-3"],[1,"card"],[1,"card-body"],[3,"submissionSelected","questionId"],[3,"submissionInput"],[1,"visually-hidden"],[1,"btn","btn-success",3,"click"]],template:function(t,o){if(t&1&&(N(0),c(1,Mt,26,8,"div",1)),t&2){let l=D(o.codingQuestion());r(),v(l?1:-1)}},dependencies:[St,H,B,j,A,bt,mt,ct,ut,dt,gt,pt,Ct,P,W],encapsulation:2,changeDetection:0})};export{ft as CodingQuestionStartComponent};
