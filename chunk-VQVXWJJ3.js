import{a as bt}from"./chunk-6AF4X5JE.js";import{a as st}from"./chunk-VQBTKGAU.js";import{a as at,h as lt,i as dt,j as mt,k as ut,l as ct,m as pt,o as gt,p as Ct}from"./chunk-SBYD6VVV.js";import{c as rt,d as j,g as A,j as P}from"./chunk-DZYN4JXA.js";import{a as D}from"./chunk-NSOPPDGI.js";import{f as ot}from"./chunk-5GO3E424.js";import{Bb as M,Cb as k,Db as V,Eb as L,Fb as N,Gb as x,Ia as a,Kb as R,L as q,Lb as it,Mb as $,Pa as _,S as X,Sa as S,Xa as c,bb as h,ca as b,dc as nt,eb as f,ec as O,gb as Z,hb as tt,ib as o,ja as p,jb as e,ka as g,kb as F,lb as v,nb as I,ob as d,ua as Y,va as y,wb as et,xb as r,yb as C,zb as u}from"./chunk-ZIYI3O6V.js";var vt=(n,i)=>i.codingSubmissionId;function xt(n,i){if(n&1){let t=v();o(0,"button",2),I("click",function(){let l=p(t).$implicit,m=d();return g(m.onSubmissionClick(l))}),o(1,"div",3)(2,"h5",4),r(3),e(),o(4,"small"),r(5),R(6,"date"),e()(),o(7,"p",4),r(8),e(),o(9,"small"),r(10),e()()}if(n&2){let t=i.$implicit;a(3),u("Submission #",t.codingSubmissionId,""),a(2),C($(6,4,t.createdAt,"short")),a(3),u("Language: ",t.language,""),a(2),u(" Score: ",t.score*100,"/100")}}var B=class n{codingQuestionsService=b(D);questionId=y.required();codingSubmissions$;submissionSelected=Y();constructor(){this.codingSubmissions$=at(this.questionId).pipe(X(i=>this.codingQuestionsService.fetchAllSubmissionsByQuestion(i)))}onSubmissionClick(i){this.submissionSelected.emit(i)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-coding-submissions-list"]],inputs:{questionId:[1,"questionId"]},outputs:{submissionSelected:"submissionSelected"},decls:4,vars:2,consts:[[1,"list-group"],["type","button",1,"list-group-item","list-group-item-action"],["type","button",1,"list-group-item","list-group-item-action",3,"click"],[1,"d-flex","w-100","justify-content-between"],[1,"mb-1"]],template:function(t,s){t&1&&(o(0,"div",0),Z(1,xt,11,7,"button",1,vt),R(3,"async"),e()),t&2&&(a(),tt(it(3,0,s.codingSubmissions$)))},dependencies:[nt,O],encapsulation:2,changeDetection:0})};function _t(n,i){if(n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),r(6,"Submission Details"),e()(),o(7,"div",5)(8,"h5",6),r(9),e(),o(10,"div",7)(11,"strong"),r(12,"Submitted on:"),e(),r(13),R(14,"date"),e(),o(15,"div",7)(16,"strong"),r(17,"Score:"),e(),r(18),e(),o(19,"div",7)(20,"strong"),r(21,"Language:"),e(),r(22),e(),o(23,"div",7)(24,"strong"),r(25,"User Code:"),e(),o(26,"pre",8),r(27),e()()()(),o(28,"div",9)(29,"div",4)(30,"h5"),r(31,"Additional Information"),e()(),o(32,"ul",10)(33,"li",11)(34,"strong"),r(35,"Question ID:"),e(),r(36),e(),o(37,"li",11)(38,"strong"),r(39,"User ID:"),e(),r(40),e()()()(),o(41,"div",12)(42,"div",3)(43,"div",4)(44,"h5"),r(45,"Actions"),e()(),o(46,"div",5)(47,"button",13),r(48," Download Code "),e(),o(49,"button",14),r(50," Review Submission "),e()()()()()()),n&2){d();let t=x(0);a(9),u(" Submission ID: ",t.codingSubmissionId," "),a(4),u(" ",$(14,7,t.createdAt,"medium")," "),a(5),u(" ",t.score*100,"/100 "),a(4),u(" ",t.language," "),a(5),u("",t.userCode,`
            `),a(9),u(" ",t.questionId," "),a(4),u(" ",t.userId," ")}}var W=class n{submissionInput=y();static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-coding-submission-details"]],inputs:{submissionInput:[1,"submissionInput"]},decls:2,vars:2,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-md-8"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"mb-3"],[1,"bg-light","p-3"],[1,"card","mt-3"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"col-md-4"],[1,"btn","btn-primary","btn-block","mb-2"],[1,"btn","btn-success","btn-block","mb-2"]],template:function(t,s){if(t&1&&(L(0),c(1,_t,51,10,"div",0)),t&2){let l=N(s.submissionInput());a(),f(l?1:-1)}},dependencies:[O],encapsulation:2,changeDetection:0})};function It(n,i){if(n&1&&(o(0,"div",1)(1,"h5",8),r(2,"Compile Errors"),e(),o(3,"pre",9),r(4),e()()),n&2){d(2);let t=x(9);a(4),C(t.compile_output)}}function wt(n,i){if(n&1&&(o(0,"div",1)(1,"h5",10),r(2,"Stdout"),e(),o(3,"pre",9),r(4),e()(),o(5,"div",1)(6,"h5",11),r(7,"Stderr"),e(),o(8,"pre",9),r(9),e()()),n&2){d(2);let t=x(9);a(4),C(t.stdout),a(5),C(t.stderr)}}function Et(n,i){if(n&1&&(o(0,"div",6),c(1,It,5,1,"div",1)(2,wt,10,2),e()),n&2){let t=d();a(),f(t.hasErrorCompilation()?1:2)}}function yt(n,i){n&1&&(o(0,"div",7)(1,"span",12),r(2,"Loading..."),e()())}var H=class n{code=y("");codingQuestionsService=b(D);output=_(null);stdin="";loading=_(!1);executeCode(){this.loading.set(!0),this.codingQuestionsService.executeCode(this.code(),"java",this.stdin).pipe(q(()=>{this.loading.set(!1)})).subscribe(i=>{console.log(i),this.output.set(i)})}hasErrorCompilation(){return this.output()?.status?.id===6}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-code-run"]],inputs:{code:[1,"code"]},decls:12,vars:3,consts:[[1,"bg-light","p-3"],[1,"mb-3"],[1,"form-group"],["for","testCaseInput"],["type","text","id","testCaseInput","placeholder","Example: 123",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"bg-dark","text-white","p-4","rounded","shadow-sm","mt-4"],["role","status",1,"spinner-border","text-primary"],[1,"text-danger"],[1,"bg-light","text-dark","p-3","rounded"],[1,"text-success"],[1,"text-warning"],[1,"visually-hidden"]],template:function(t,s){if(t&1){let l=v();o(0,"div",0)(1,"h5",1),r(2,"Test Case Input"),e(),o(3,"div",2)(4,"label",3),r(5,"Enter Test Case Input:"),e(),o(6,"input",4),V("ngModelChange",function(T){return p(l),k(s.stdin,T)||(s.stdin=T),g(T)}),e()(),o(7,"button",5),I("click",function(){return p(l),g(s.executeCode())}),r(8,"Run Code"),e()(),L(9),c(10,Et,3,1,"div",6)(11,yt,3,0,"div",7)}if(t&2){a(6),M("ngModel",s.stdin),a(3);let l=N(s.output());a(),f(l?10:s.loading()?11:-1)}},dependencies:[P,rt,j,A],encapsulation:2,changeDetection:0})};var J=class{static generateJavaCode(i,t){let s="",{arguments:l,returnType:m}=t;s+=`import java.util.*;

`;let T=l.map(w=>`${w.type} ${w.name}`).join(", ");s+=`class Solution {
    public ${m} ${i.functionName}(${T}) {
        // TODO: Implement this function
        return null; // Replace with appropriate return value
    }
}
`,s+=`public class Main {
`,s+=`    public static void main(String[] args) {
`,s+=`        Scanner scanner = new Scanner(System.in);
`;let U=i.functionSignatures.find(w=>w.language==="java");if(!U)throw new Error("No Java function signature found");let ft=U.arguments,Q="";return ft.forEach(w=>{let{type:K,name:E}=w;switch(K){case"List<Integer>":Q+=`
        String listInput = scanner.nextLine().trim();
        List<Integer> ${E} = new ArrayList<>();
        listInput = listInput.substring(1, listInput.length() - 1); // Remove brackets
        if (!listInput.isEmpty()) {
            for (String num : listInput.split(",")) {
                ${E}.add(Integer.parseInt(num.trim()));
            }
        }
          `;break;case"int":Q+=`        int ${E} = Integer.parseInt(scanner.nextLine().trim());
`;break;case"String":Q+=`        String ${E} = scanner.nextLine().trim();
`;break;case"List<String>":Q+=`
        String listInputStr = scanner.nextLine().trim();
        List<String> ${E} = new ArrayList<>();
        listInputStr = listInputStr.substring(1, listInputStr.length() - 1); // Remove brackets
        if (!listInputStr.isEmpty()) {
            for (String str : listInputStr.split(",")) {
                ${E}.add(str.trim());
            }
        }
          `;break;default:throw new Error(`Unsupported argument type: ${K}`)}}),s+=Q,s+=`        Solution solution = new Solution();
`,s+=`        ${this.generateFunctionCall(U,i.functionName)}
`,s+=`    }
`,s+=`}
`,s}static generateFunctionCall(i,t){let s=`${i.returnType} result = solution.${t}(`;return i.arguments.forEach((l,m)=>{s+=l.name,m<i.arguments.length-1&&(s+=", ")}),s+=`);
`,s+="        System.out.println(result);",s}};function Lt(n,i){if(n&1&&(o(0,"h2",19),r(1),e(),o(2,"div",20)(3,"div",21)(4,"p",13),r(5),e()()()),n&2){d(2);let t=x(0);a(),C(t.title),a(4),C(t.description)}}function Nt(n,i){if(n&1){let t=v();o(0,"app-coding-submissions-list",22),I("submissionSelected",function(l){p(t);let m=d(2);return g(m.selectSubmission(l))}),e()}if(n&2){d(2);let t=x(0);h("questionId",t.id)}}function Dt(n,i){if(n&1&&F(0,"app-coding-submission-details",23),n&2){let t=d(2);h("submissionInput",t.currentSubmission())}}function Tt(n,i){n&1&&(o(0,"div",14)(1,"span",24),r(2,"Loading..."),e()())}function Qt(n,i){if(n&1){let t=v();o(0,"button",25),I("click",function(){p(t);let l=d(2);return g(l.submitSolution())}),r(1," Submit Solution "),e()}}function Mt(n,i){if(n&1){let t=v();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"ul",4,0),V("activeIdChange",function(l){p(t);let m=d();return k(m.active,l)||(m.active=l),g(l)}),o(5,"li",5)(6,"button",6),r(7,"Description"),e(),c(8,Lt,6,2,"ng-template",7),e(),o(9,"li",8)(10,"button",6),r(11,"History"),e(),c(12,Nt,1,1,"ng-template",7),e(),o(13,"li",9)(14,"button",6),r(15,"Submissions"),e(),c(16,Dt,1,1,"ng-template",7),e()(),F(17,"div",10),e(),o(18,"div",11)(19,"div",12)(20,"h5",13),r(21,"Code Editor"),e(),c(22,Tt,3,0,"div",14)(23,Qt,2,0,"button",15),e(),o(24,"div",16)(25,"ngx-monaco-editor",17),V("ngModelChange",function(l){p(t);let m=d();return k(m.code,l)||(m.code=l),g(l)}),e()(),F(26,"app-code-run",18),e()()()}if(n&2){let t=et(4),s=d();a(3),h("destroyOnHide",!1),M("activeId",s.active),a(14),h("ngbNavOutlet",t),a(5),f(s.isSubmitting()?22:23),a(3),h("options",s.editorOptions),M("ngModel",s.code),a(),h("code",s.code)}}var St=class n{codingQuestionsService=b(D);alertService=b(st);codingQuestion=_(null);active="description";currentSubmission=_(null);isSubmitting=_(!1);route=b(ot);ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&this.codingQuestionsService.getCodingQuestion(i).subscribe(t=>{this.codingQuestion.set(t),this.code=this.generateFunctionTemplate(t,"java")})}editorOptions={language:"java"};code="";submitSolution(){this.codingQuestion&&(this.isSubmitting.set(!0),this.codingQuestionsService.submitCodingQuestion(this.codingQuestion().id,"java",this.code).pipe(q(()=>{this.isSubmitting.set(!1)})).subscribe({next:i=>{this.alertService.setMessage({type:"success",message:"Code has been submitted"}),this.selectSubmission(i)}}))}selectSubmission(i){this.currentSubmission.set(i),this.navigateToSubmissionTab()}generateFunctionTemplate(i,t){let s=i.functionSignatures.find(l=>l.language.toLowerCase()===t.toLowerCase());if(!s)throw new Error(`Function signature not found for language: ${t}`);return J.generateJavaCode(i,s)}navigateToSubmissionTab(){this.active="submission-detail"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-coding-question-start"]],decls:2,vars:2,consts:[["nav","ngbNav"],[1,"container-fluid","h-100","flex-grow-1","d-flex","flex-column"],[1,"row","flex-grow-1","overflow-hidden"],[1,"col-md-6","bg-light","overflow-auto","p-3","mh-100"],["ngbNav","",1,"nav-tabs",3,"activeIdChange","destroyOnHide","activeId"],["ngbNavItem","description"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","submissions-list"],["ngbNavItem","submission-detail"],[1,"mt-2",3,"ngbNavOutlet"],[1,"col-md-6","d-flex","flex-column","overflow-hidden"],[1,"bg-dark","text-white","p-3","d-flex","align-items-center","justify-content-between"],[1,"mb-0"],["role","status",1,"spinner-border","text-primary"],[1,"btn","btn-success"],[1,"flex-grow-1","h-50","overflow-auto"],[1,"h-100","w-100",3,"ngModelChange","options","ngModel"],[1,"flex-grow-1",3,"code"],[1,"mb-3"],[1,"card"],[1,"card-body"],[3,"submissionSelected","questionId"],[3,"submissionInput"],[1,"visually-hidden"],[1,"btn","btn-success",3,"click"]],template:function(t,s){if(t&1&&(L(0),c(1,Mt,27,7,"div",1)),t&2){let l=N(s.codingQuestion());a(),f(l?1:-1)}},dependencies:[bt,H,P,j,A,Ct,lt,ut,mt,dt,pt,ct,gt,B,W],encapsulation:2,changeDetection:0})};export{St as CodingQuestionStartComponent};
