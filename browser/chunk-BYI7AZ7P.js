import{a as E}from"./chunk-73VRFJMX.js";import{f as I}from"./chunk-ICYQ7GPO.js";import{$ as u,$a as o,Da as r,Ma as S,Ra as p,Wa as h,Ya as b,Za as f,_a as _,ab as s,ba as C,bb as v,eb as m,hb as x,nb as a,ob as y,pb as d,qb as w,rb as q,tb as z}from"./chunk-A7BKTUOQ.js";var T=(i,t)=>t.id;function $(i,t){i&1&&(o(0,"span",9),a(1," \u274C "),s())}function A(i,t){i&1&&(o(0,"span",10),a(1," \u2713 "),s())}function D(i,t){if(i&1&&(q(0)(1),o(2,"div",6),v(3,"input",7),o(4,"label",8),a(5),s(),p(6,$,2,0,"span",9)(7,A,2,0,"span",10),s()),i&2){let e=t.$implicit,n=m().$implicit,g=m(2),c=g.isAnswerselected(n.id,e.id),l=g.isCorrectAnswer(n.id,e.id);r(3),x("id","",n.id,"answer",e.id,""),r(),h("btn-success",c&&l)("btn-outline-primary",!c&&!l)("btn-outline-success",!c&&l)("btn-danger",c&&!l),x("for","",n.id,"answer",e.id,""),r(),d(" ",e.option," "),r(),b(!l&&c?6:l&&c?7:-1)}}function Q(i,t){if(i&1&&(o(0,"h3"),a(1),s(),o(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),a(6),s(),o(7,"form",5),f(8,D,8,16,"div",6,T),s()()()()),i&2){let e=t.$implicit,n=t.$index;r(),d("Question ",n,""),r(5),d(" ",e.text," "),r(2),_(e.answers)}}function k(i,t){if(i&1&&(o(0,"h2"),a(1,"Result"),s(),o(2,"h3"),a(3),s(),o(4,"h3"),a(5),s(),f(6,Q,10,2,null,null,T)),i&2){let e=m();r(3),y(e.quiz.title),r(2),w(" Score: ",e.getScore()," (",e.getDetailScore(),") "),r(),_(e.quiz.questions)}}function M(i,t){i&1&&(o(0,"div",0)(1,"span",11),a(2,"Loading..."),s()())}var F=class i{quizService=u(E);route=u(I);quiz;submission;loading=S(!0);ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&this.quizService.fetchSubmission(t).subscribe(e=>{this.submission=e,this.quizService.fetchQuiz(e.quizId).subscribe(n=>{console.log(e,n),this.quiz=n,this.loading.set(!1)})})}isAnswerselected(t,e){return this.submission?.answers[t].has(e)}isCorrectAnswer(t,e){return this.submission?.correctAnswers[t].has(e)}getScore(){return this.submission.score*100}getDetailScore(){return`${this.submission.score*this.quiz.questions.length} / ${this.quiz.questions.length}`}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-submission"]],standalone:!0,features:[z],decls:2,vars:1,consts:[["role","status",1,"spinner-border","text-primary"],[1,"container","mt-4"],[1,"card","shadow","p-3","mb-4"],[1,"card-body"],[1,"card-title","border","rounded","p-3",2,"white-space","pre-wrap","max-height","500px","overflow-y","auto"],[1,"d-flex","flex-column","gap-3"],[1,"btn-group"],["type","checkbox","disabled","",1,"btn-check",3,"id"],[1,"btn","btn-lg","text-start","border-2","align-content-center",3,"for"],["aria-label","Wrong answer",1,"d-flex","justify-content-center","align-items-center","display-5","ms-2","text-danger"],["aria-label","Correct answer or not selected",1,"d-flex","justify-content-center","align-items-center","display-5","ms-2","text-success"],[1,"visually-hidden"]],template:function(e,n){e&1&&p(0,k,8,3)(1,M,3,0,"div",0),e&2&&b(!n.loading()&&n.submission&&n.quiz?0:1)},styles:[".btn-check[_ngcontent-%COMP%]:disabled + .btn[_ngcontent-%COMP%]{pointer-events:none;cursor:default;opacity:1}"]})};export{F as SubmissionComponent};
