import{a as A}from"./chunk-QD6735PX.js";import{a as Q}from"./chunk-LCPV2XUX.js";import{a as E}from"./chunk-HFUMLTSQ.js";import{g as I}from"./chunk-PFJV3CQX.js";import{Ab as w,Bb as u,Cb as q,Gb as y,Ia as n,L as h,S as v,Ta as C,Ya as p,ca as m,db as g,fb as b,ib as f,jb as _,kb as o,lb as s,mb as z,qb as d,tb as S,zb as a}from"./chunk-DDZ2KP6O.js";var $=(i,t)=>t.id;function T(i,t){i&1&&(o(0,"span",9),a(1," \u274C "),s())}function M(i,t){i&1&&(o(0,"span",10),a(1," \u2713 "),s())}function D(i,t){if(i&1&&(y(0)(1),o(2,"div",6),z(3,"input",7),o(4,"label",8),a(5),s(),p(6,T,2,0,"span",9)(7,M,2,0,"span",10),s()),i&2){let e=t.$implicit,r=d().$implicit,x=d(2),c=x.isAnswerselected(r.id,e.id),l=x.isCorrectAnswer(r.id,e.id);n(3),S("id","",r.id,"answer",e.id,""),n(),g("btn-success",c&&l)("btn-outline-primary",!c&&!l)("btn-outline-success",!c&&l)("btn-danger",c&&!l),S("for","",r.id,"answer",e.id,""),n(),u(" ",e.option," "),n(),b(!l&&c?6:l&&c?7:-1)}}function O(i,t){if(i&1&&(o(0,"h3"),a(1),s(),o(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),a(6),s(),o(7,"form",5),f(8,D,8,16,"div",6,$),s()()()()),i&2){let e=t.$implicit,r=t.$index;n(),u("Question ",r,""),n(5),u(" ",e.text," "),n(2),_(e.answers)}}function k(i,t){if(i&1&&(o(0,"h2"),a(1,"Result"),s(),o(2,"h3"),a(3),s(),o(4,"h3"),a(5),s(),f(6,O,10,2,null,null,$)),i&2){let e=d();n(3),w(e.quiz.title),n(2),q("Score: ",e.getScore()," (",e.getDetailScore(),")"),n(),_(e.quiz.questions)}}var F=class i{submissionService=m(A);quizService=m(Q);route=m(I);quiz;submission;spinner=m(E);ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&this.loadSubmissionAndQuiz(t)}isAnswerselected(t,e){return this.submission?.answers[t].has(e)}isCorrectAnswer(t,e){return this.submission?.correctAnswers[t].has(e)}getScore(){return this.submission.score*100}getDetailScore(){return`${this.submission.score*this.quiz.questions.length} / ${this.quiz.questions.length}`}loadSubmissionAndQuiz(t){this.spinner.openGlobalSpinner(),this.submissionService.fetchSubmission(t).pipe(v(e=>(this.submission=e,this.quizService.fetchQuizWithQuestions(e.quizId))),h(()=>{this.spinner.closeGlobalSpinner()})).subscribe({next:e=>{this.quiz=e},error:e=>{console.error("Error loading submission or quiz:",e)}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-submission"]],decls:2,vars:1,consts:[[1,"flex-column","text-center"],[1,"container","mt-4"],[1,"card","shadow","p-3","mb-4"],[1,"card-body"],[1,"card-title","border","rounded","p-3",2,"white-space","pre-wrap","max-height","500px","overflow-y","auto"],[1,"d-flex","flex-column","gap-3"],[1,"btn-group"],["type","checkbox","disabled","",1,"btn-check",3,"id"],[1,"btn","btn-lg","text-start","border-2","align-content-center",3,"for"],["aria-label","Wrong answer",1,"d-flex","justify-content-center","align-items-center","display-5","ms-2","text-danger"],["aria-label","Correct answer or not selected",1,"d-flex","justify-content-center","align-items-center","display-5","ms-2","text-success"]],template:function(e,r){e&1&&(o(0,"div",0),p(1,k,8,3),s()),e&2&&(n(),b(r.submission&&r.quiz?1:-1))},styles:[".btn-check[_ngcontent-%COMP%]:disabled + .btn[_ngcontent-%COMP%]{pointer-events:none;cursor:default;opacity:1}"]})};export{F as SubmissionComponent};
