"use strict";(self.webpackChunksijo_qcm_front=self.webpackChunksijo_qcm_front||[]).push([[649],{5649:(E,u,o)=>{o.r(u),o.d(u,{SubmissionComponent:()=>g});var i=o(4438),d=o(593),_=o(749),m=o(5558),p=o(4744);const l=(t,e)=>e.id;function b(t,e){1&t&&(i.j41(0,"span",10),i.EFF(1," \u274c "),i.k0s())}function f(t,e){1&t&&(i.j41(0,"span",11),i.EFF(1," \u2713 "),i.k0s())}function h(t,e){if(1&t&&(i.SS7(0)(1),i.j41(2,"div",7),i.nrm(3,"input",8),i.j41(4,"label",9),i.EFF(5),i.k0s(),i.DNE(6,b,2,0,"span",10)(7,f,2,0,"span",11),i.k0s()),2&t){const s=e.$implicit,n=i.XpG().$implicit,r=i.XpG(2),c=r.isAnswerselected(n.id,s.id),a=r.isCorrectAnswer(n.id,s.id);i.R7$(3),i.FCK("id","",n.id,"answer",s.id,""),i.R7$(),i.AVh("btn-success",c&&a)("btn-outline-primary",!c&&!a)("btn-outline-success",!c&&a)("btn-danger",c&&!a),i.FCK("for","",n.id,"answer",s.id,""),i.R7$(),i.SpI(" ",s.option," "),i.R7$(),i.vxM(!a&&c?6:a&&c?7:-1)}}function C(t,e){if(1&t&&(i.j41(0,"h3"),i.EFF(1),i.k0s(),i.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),i.EFF(6),i.k0s(),i.j41(7,"form",6),i.Z7z(8,h,8,16,"div",7,l),i.k0s()()()()),2&t){const s=e.$implicit,n=e.$index;i.R7$(),i.SpI("Question ",n,""),i.R7$(5),i.SpI(" ",s.text," "),i.R7$(2),i.Dyx(s.answers)}}function v(t,e){if(1&t&&(i.j41(0,"h2"),i.EFF(1,"Result"),i.k0s(),i.j41(2,"h3"),i.EFF(3),i.k0s(),i.j41(4,"h3"),i.EFF(5),i.k0s(),i.Z7z(6,C,10,2,null,null,l)),2&t){const s=i.XpG();i.R7$(3),i.JRh(s.quiz.title),i.R7$(2),i.Lme(" Score: ",s.getScore()," (",s.getDetailScore(),") "),i.R7$(),i.Dyx(s.quiz.questions)}}function F(t,e){1&t&&(i.j41(0,"div",1)(1,"span",12),i.EFF(2,"Loading..."),i.k0s()())}let g=(()=>{class t{submissionService=(0,i.WQX)(p.E);quizService=(0,i.WQX)(d.p);route=(0,i.WQX)(_.nX);quiz;submission;loading=(0,i.vPA)(!0);ngOnInit(){const s=this.route.snapshot.paramMap.get("id");s&&this.loadSubmissionAndQuiz(s)}isAnswerselected(s,n){return this.submission?.answers[s].has(n)}isCorrectAnswer(s,n){return this.submission?.correctAnswers[s].has(n)}getScore(){return 100*this.submission.score}getDetailScore(){return`${this.submission.score*this.quiz.questions.length} / ${this.quiz.questions.length}`}loadSubmissionAndQuiz(s){this.submissionService.fetchSubmission(s).pipe((0,m.n)(n=>(this.submission=n,this.quizService.fetchQuizWithQuestions(n.quizId)))).subscribe({next:n=>{this.quiz=n,this.loading.set(!1)},error:n=>{console.error("Error loading submission or quiz:",n),this.loading.set(!1)}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=i.VBU({type:t,selectors:[["app-submission"]],standalone:!0,features:[i.aNF],decls:3,vars:1,consts:[[1,"flex-column","text-center"],["role","status",1,"spinner-border","text-primary"],[1,"container","mt-4"],[1,"card","shadow","p-3","mb-4"],[1,"card-body"],[1,"card-title","border","rounded","p-3",2,"white-space","pre-wrap","max-height","500px","overflow-y","auto"],[1,"d-flex","flex-column","gap-3"],[1,"btn-group"],["type","checkbox","disabled","",1,"btn-check",3,"id"],[1,"btn","btn-lg","text-start","border-2","align-content-center",3,"for"],["aria-label","Wrong answer",1,"d-flex","justify-content-center","align-items-center","display-5","ms-2","text-danger"],["aria-label","Correct answer or not selected",1,"d-flex","justify-content-center","align-items-center","display-5","ms-2","text-success"],[1,"visually-hidden"]],template:function(n,r){1&n&&(i.j41(0,"div",0),i.DNE(1,v,8,3)(2,F,3,0,"div",1),i.k0s()),2&n&&(i.R7$(),i.vxM(!r.loading()&&r.submission&&r.quiz?1:2))},styles:[".btn-check[_ngcontent-%COMP%]:disabled + .btn[_ngcontent-%COMP%]{pointer-events:none;cursor:default;opacity:1}"]})}return t})()}}]);