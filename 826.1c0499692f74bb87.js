"use strict";(self.webpackChunksijo_qcm_front=self.webpackChunksijo_qcm_front||[]).push([[826],{8826:(Q,a,o)=>{o.r(a),o.d(a,{QuizEditComponent:()=>C});var t=o(4438),c=o(749),d=o(593),r=o(4341),z=o(4629);const p={_id:"%s",title:"This is an example",explanation:"Example",category:"Java",questions:[{id:"q1",text:"Quel est le type de retour de la m\xe9thode 'main' en Java ?",answers:[{id:"a1",option:"void",isCorrect:!0},{id:"a2",option:"int",isCorrect:!0},{id:"a3",option:"String"},{id:"a4",option:"boolean"}]}]};function m(s,u){if(1&s){const e=t.RV6();t.j41(0,"button",5),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.delete())}),t.EFF(1,"Delete"),t.k0s(),t.j41(2,"button",6),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.reset())}),t.EFF(3,"Reset"),t.k0s(),t.j41(4,"button",7),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.save())}),t.EFF(5,"Save"),t.k0s()}}function h(s,u){if(1&s){const e=t.RV6();t.j41(0,"button",8),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.create())}),t.EFF(1,"Create"),t.k0s()}}function _(s,u){if(1&s){const e=t.RV6();t.j41(0,"textarea",2),t.mxI("ngModelChange",function(n){t.eBV(e);const l=t.XpG();return t.DH7(l.jsonQuiz,n)||(l.jsonQuiz=n),t.Njj(n)}),t.k0s(),t.j41(1,"div",3),t.DNE(2,m,6,0)(3,h,2,0,"button",4),t.k0s()}if(2&s){const e=t.XpG();t.R50("ngModel",e.jsonQuiz),t.R7$(2),t.vxM(e.isEditing?2:3)}}function g(s,u){1&s&&(t.j41(0,"div",1)(1,"span",9),t.EFF(2,"Loading..."),t.k0s()())}let C=(()=>{class s{route=(0,t.WQX)(c.nX);router=(0,t.WQX)(c.Ix);quizService=(0,t.WQX)(d.p);alertService=(0,t.WQX)(z.u);isEditing=!1;quiz=(0,t.vPA)(null);jsonQuiz=(0,t.vPA)("");ngOnInit(){const e=this.route.snapshot.paramMap.get("id");if(e)this.fetchQuiz(e),this.isEditing=!0;else{const{_id:i,...n}=p;this.quiz.set(n),this.jsonQuiz.set(JSON.stringify(this.quiz(),null,2))}}save(){try{const e=JSON.parse(this.jsonQuiz());this.quizService.updateQuiz(e).subscribe({next:i=>{this.quiz.set(i),this.jsonQuiz.set(JSON.stringify(this.quiz(),null,2)),this.alertService.setMessage({message:"Quiz has been updated",type:"success"})},error:i=>{this.alertService.setMessage({message:`Error while updating quiz:  ${i?.description}`,type:"danger"})}})}catch{this.alertService.setMessage({message:"Invalid JSON format. Please correct it.",type:"danger"})}}reset(){this.jsonQuiz.set(JSON.stringify(this.quiz(),null,2))}delete(){this.quizService.deleteQuiz(this.quiz()).subscribe(()=>{this.router.navigate(["/quizzes"]),this.alertService.setMessage({message:"Quiz has been deleted",type:"success"})})}create(){this.quizService.createQuiz(this.quiz()).subscribe(()=>{this.router.navigate(["/quizzes"]),this.alertService.setMessage({message:"Quiz has been created",type:"success"})})}fetchQuiz(e){this.quizService.fetchFullQuizById(e).subscribe(i=>{this.quiz.set(i),this.jsonQuiz.set(JSON.stringify(this.quiz(),null,2))})}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=t.VBU({type:s,selectors:[["app-quiz-edit"]],standalone:!0,features:[t.aNF],decls:5,vars:1,consts:[[1,"container","mt-3"],["role","status",1,"spinner-border","text-primary"],["rows","15","placeholder","Edit your quiz JSON here",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3","d-flex","justify-content-end","gap-2"],[1,"btn","btn-success"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"],[1,"visually-hidden"]],template:function(i,n){1&i&&(t.j41(0,"div",0)(1,"h3"),t.EFF(2,"Edit Quiz JSON"),t.k0s(),t.DNE(3,_,4,2)(4,g,3,0,"div",1),t.k0s()),2&i&&(t.R7$(3),t.vxM(n.quiz()?3:4))},dependencies:[r.YN,r.me,r.BC,r.vS],changeDetection:0})}return s})()}}]);