import{a as fe}from"./chunk-RPDYWJNU.js";import{a as D}from"./chunk-TIUR7UPA.js";import{a as ae}from"./chunk-Y3VK6ECA.js";import{a as P}from"./chunk-HFUMLTSQ.js";import{A as B,H as de,I as ue,J as ce,K as pe,L as ge,M as Ce,O as be,P as Se,g as re,n as le,q as me,r as j,u as A}from"./chunk-PFJV3CQX.js";import{Ab as S,Bb as u,Db as M,Eb as k,Fb as V,Gb as N,Hb as L,Ia as a,Ib as v,L as F,Mb as q,Nb as ne,Ob as $,Pa as T,S as Y,Ta as f,Vb as oe,Ya as C,ca as c,cb as b,fb as h,gc as se,hc as O,ib as ee,ja as p,jb as te,ka as g,kb as o,lb as t,mb as R,nb as I,pb as E,qb as m,ua as Z,va as _,yb as ie,zb as r}from"./chunk-DDZ2KP6O.js";var W=class{static generateJavaCode(i,e){let n="",{arguments:l,returnType:d}=e;n+=`import java.util.*;

`;let Q=l.map(w=>`${w.type} ${w.name}`).join(", ");n+=`class Solution {
    public ${d} ${i.functionName}(${Q}) {
        // TODO: Implement this function
        return null; // Replace with appropriate return value
    }
}
`,n+=`public class Main {
`,n+=`    public static void main(String[] args) {
`,n+=`        Scanner scanner = new Scanner(System.in);
`;let U=i.functionSignatures.find(w=>w.language==="java");if(!U)throw new Error("No Java function signature found");let xe=U.arguments,y="";return xe.forEach(w=>{let{type:X,name:x}=w;switch(X){case"List<Integer>":y+=`
        String listInput = scanner.nextLine().trim();
        List<Integer> ${x} = new ArrayList<>();
        listInput = listInput.substring(1, listInput.length() - 1); // Remove brackets
        if (!listInput.isEmpty()) {
            for (String num : listInput.split(",")) {
                ${x}.add(Integer.parseInt(num.trim()));
            }
        }
          `;break;case"Integer":case"int":y+=`        int ${x} = Integer.parseInt(scanner.nextLine().trim());
`;break;case"boolean":y+=`        boolean ${x} = Boolean.parseBoolean(scanner.nextLine().trim());
`;break;case"String":y+=`        String ${x} = scanner.nextLine().trim();
`;break;case"List<String>":y+=`
        String listInputStr = scanner.nextLine().trim();
        List<String> ${x} = new ArrayList<>();
        listInputStr = listInputStr.substring(1, listInputStr.length() - 1); // Remove brackets
        if (!listInputStr.isEmpty()) {
            for (String str : listInputStr.split(",")) {
                ${x}.eadd(str.trim());
            }
        }
          `;break;default:throw new Error(`Unsupported argument type: ${X}`)}}),n+=y,n+=`        Solution solution = new Solution();
`,n+=`        ${this.generateFunctionCall(U,i.functionName)}
`,n+=`    }
`,n+=`}
`,n}static generateFunctionCall(i,e){let n=`${i.returnType} result = solution.${e}(`;return i.arguments.forEach((l,d)=>{n+=l.name,d<i.arguments.length-1&&(n+=", ")}),n+=`);
`,n+="        System.out.println(result);",n}};function he(s,i){if(s&1&&(o(0,"div",2)(1,"h5",8),r(2,"Compile Errors"),t(),o(3,"pre",9),r(4),t()()),s&2){m(2);let e=v(10);a(4),S(e.compile_output)}}function Ie(s,i){if(s&1&&(o(0,"div",2)(1,"h5",10),r(2,"Stdout"),t(),o(3,"pre",9),r(4),t()(),o(5,"div",2)(6,"h5",11),r(7,"Stderr"),t(),o(8,"pre",9),r(9),t()()),s&2){m(2);let e=v(10);a(4),S(e.stdout),a(5),S(e.stderr)}}function Ee(s,i){if(s&1&&(o(0,"div",7),C(1,he,5,1,"div",2)(2,Ie,10,2),t()),s&2){let e=m();a(),h(e.hasErrorCompilation()?1:2)}}var G=class s{code=_("");exampleInput=_();codingQuestionsService=c(D);output=T(null);stdin=oe(()=>this.exampleInput());spinner=c(P);executeCode(){this.spinner.openGlobalSpinner(),this.codingQuestionsService.executeCode(this.code(),"java",this.stdin()).pipe(F(()=>{this.spinner.closeGlobalSpinner()})).subscribe(i=>{console.log(i),this.output.set(i)})}hasErrorCompilation(){return this.output()?.status?.id===6}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=f({type:s,selectors:[["app-code-run"]],inputs:{code:[1,"code"],exampleInput:[1,"exampleInput"]},decls:12,vars:4,consts:[[1,"container"],[1,"bg-light","p-3"],[1,"mb-3"],[1,"form-group"],["for","testCaseInput"],["id","testCaseInput","rows","3",1,"form-control",3,"ngModelChange","placeholder","ngModel"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"bg-dark","text-white","p-4","rounded","shadow-sm","mt-4"],[1,"text-danger"],[1,"bg-light","text-dark","p-3","rounded"],[1,"text-success"],[1,"text-warning"]],template:function(e,n){if(e&1){let l=I();o(0,"div",0)(1,"div",1)(2,"h5",2),r(3,"Test Case Input"),t(),o(4,"div",3)(5,"label",4),r(6,"Enter Test Case Input:"),t(),o(7,"textarea",5),V("ngModelChange",function(Q){return p(l),k(n.stdin,Q)||(n.stdin=Q),g(Q)}),t()(),o(8,"button",6),E("click",function(){return p(l),g(n.executeCode())}),r(9," Run Code "),t()(),N(10),C(11,Ee,3,1,"div",7),t()}if(e&2){a(7),b("placeholder",n.exampleInput()),M("ngModel",n.stdin),a(3);let l=L(n.output());a(),h(l?11:-1)}},dependencies:[B,me,j,A],encapsulation:2,changeDetection:0})};function ye(s,i){if(s&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),r(4,"Submission Details"),t()(),o(5,"div",3)(6,"h5",4),r(7),t(),o(8,"div",5)(9,"strong"),r(10,"Submitted on:"),t(),r(11),q(12,"date"),t(),o(13,"div",5)(14,"strong"),r(15,"Score:"),t(),r(16),t(),o(17,"div",5)(18,"strong"),r(19,"Language:"),t(),r(20),t(),o(21,"div",5)(22,"strong"),r(23,"User Code:"),t(),o(24,"pre",6),r(25),t()()()(),o(26,"div",7)(27,"div",2)(28,"h5"),r(29,"Additional Information"),t()(),o(30,"ul",8)(31,"li",9)(32,"strong"),r(33,"Question ID:"),t(),r(34),t(),o(35,"li",9)(36,"strong"),r(37,"User ID:"),t(),r(38),t()()()()),s&2){m();let e=v(0);a(7),u(" Submission ID: ",e.codingSubmissionId," "),a(4),u(" ",$(12,7,e.createdAt,"medium")," "),a(5),u(" ",e.score*100,"/100 "),a(4),u(" ",e.language," "),a(5),u("",e.userCode,`
            `),a(9),u(" ",e.questionId," "),a(4),u(" ",e.userId," ")}}var H=class s{submissionInput=_();static \u0275fac=function(e){return new(e||s)};static \u0275cmp=f({type:s,selectors:[["app-coding-submission-details"]],inputs:{submissionInput:[1,"submissionInput"]},decls:2,vars:2,consts:[[1,"container","mt-4",2,"height","500px"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"mb-3"],[1,"bg-light","p-3"],[1,"card","mt-3"],[1,"list-group","list-group-flush"],[1,"list-group-item"]],template:function(e,n){if(e&1&&(N(0),C(1,ye,39,10,"div",0)),e&2){let l=L(n.submissionInput());a(),h(l?1:-1)}},dependencies:[O],encapsulation:2,changeDetection:0})};var we=(s,i)=>i.codingSubmissionId;function Ne(s,i){if(s&1){let e=I();o(0,"button",2),E("click",function(){let l=p(e).$implicit,d=m();return g(d.onSubmissionClick(l))}),o(1,"div",3)(2,"h5",4),r(3),t(),o(4,"small"),r(5),q(6,"date"),t()(),o(7,"p",4),r(8),t(),o(9,"small"),r(10),t()()}if(s&2){let e=i.$implicit;a(3),u("Submission #",e.codingSubmissionId,""),a(2),S($(6,4,e.createdAt,"short")),a(3),u("Language: ",e.language,""),a(2),u(" Score: ",e.score*100,"/100")}}var J=class s{codingQuestionsService=c(D);questionId=_.required();codingSubmissions$;submissionSelected=Z();constructor(){this.codingSubmissions$=le(this.questionId).pipe(Y(i=>this.codingQuestionsService.fetchAllSubmissionsByQuestion(i)))}onSubmissionClick(i){this.submissionSelected.emit(i)}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=f({type:s,selectors:[["app-coding-submissions-list"]],inputs:{questionId:[1,"questionId"]},outputs:{submissionSelected:"submissionSelected"},decls:4,vars:2,consts:[[1,"list-group"],["type","button",1,"list-group-item","list-group-item-action"],["type","button",1,"list-group-item","list-group-item-action",3,"click"],[1,"d-flex","w-100","justify-content-between"],[1,"mb-1"]],template:function(e,n){e&1&&(o(0,"div",0),ee(1,Ne,11,7,"button",1,we),q(3,"async"),t()),e&2&&(a(),te(ne(3,0,n.codingSubmissions$)))},dependencies:[se,O],encapsulation:2,changeDetection:0})};function Le(s,i){if(s&1&&(o(0,"h2",17),r(1),t(),o(2,"div",18)(3,"div",19)(4,"p",12),r(5),t()()()),s&2){m(2);let e=v(0);a(),S(e.title),a(4),S(e.description)}}function De(s,i){if(s&1){let e=I();o(0,"app-coding-submissions-list",20),E("submissionSelected",function(l){p(e);let d=m(2);return g(d.selectSubmission(l))}),t()}if(s&2){m(2);let e=v(0);b("questionId",e.id)}}function Qe(s,i){if(s&1&&R(0,"app-coding-submission-details",21),s&2){let e=m(2);b("submissionInput",e.currentSubmission())}}function Te(s,i){if(s&1){let e=I();o(0,"div",1)(1,"div",2)(2,"ul",3,0),V("activeIdChange",function(l){p(e);let d=m();return k(d.active,l)||(d.active=l),g(l)}),o(4,"li",4)(5,"button",5),r(6,"Description"),t(),C(7,Le,6,2,"ng-template",6),t(),o(8,"li",7)(9,"button",5),r(10,"History"),t(),C(11,De,1,1,"ng-template",6),t(),o(12,"li",8)(13,"button",5),r(14,"Submissions"),t(),C(15,Qe,1,1,"ng-template",6),t()(),R(16,"div",9),t(),o(17,"div",10)(18,"div",11)(19,"h5",12),r(20,"Code Editor"),t(),o(21,"button",13),E("click",function(){p(e);let l=m();return g(l.submitSolution())}),r(22," Submit Solution "),t()(),o(23,"div",14)(24,"ngx-monaco-editor",15),V("ngModelChange",function(l){p(e);let d=m();return k(d.code,l)||(d.code=l),g(l)}),t()(),R(25,"app-code-run",16),t()()}if(s&2){let e=ie(3),n=m();a(2),b("destroyOnHide",!1),M("activeId",n.active),a(14),b("ngbNavOutlet",e),a(8),b("options",n.editorOptions),M("ngModel",n.code),a(),b("code",n.code)("exampleInput",n.createExampleInput())}}var ve=class s{codingQuestionsService=c(D);alertService=c(ae);codingQuestion=T(null);active="description";currentSubmission=T(null);route=c(re);spinner=c(P);ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&this.codingQuestionsService.getCodingQuestion(i).subscribe(e=>{this.codingQuestion.set(e),this.code=this.generateFunctionTemplate(e,"java")})}editorOptions={language:"java"};code="";submitSolution(){this.codingQuestion&&(this.spinner.openGlobalSpinner(),this.codingQuestionsService.submitCodingQuestion(this.codingQuestion()?.id,"java",this.code).pipe(F(()=>{this.spinner.closeGlobalSpinner()})).subscribe({next:i=>{this.alertService.setMessage({type:"success",message:"Code has been submitted"}),this.selectSubmission(i)}}))}createExampleInput(){return this.codingQuestion()?.testCases[0]?.input}selectSubmission(i){this.currentSubmission.set(i),this.navigateToSubmissionTab()}generateFunctionTemplate(i,e){let n=i.functionSignatures.find(l=>l.language.toLowerCase()===e.toLowerCase());if(!n)throw new Error(`Function signature not found for language: ${e}`);return W.generateJavaCode(i,n)}navigateToSubmissionTab(){this.active="submission-detail"}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=f({type:s,selectors:[["app-coding-question-start"]],decls:2,vars:2,consts:[["nav","ngbNav"],[1,"container-fluid","h-100","row"],[1,"col-md-6","bg-light","overflow-auto"],["ngbNav","",1,"nav-tabs",3,"activeIdChange","destroyOnHide","activeId"],["ngbNavItem","description"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","submissions-list"],["ngbNavItem","submission-detail"],[1,"mt-2",3,"ngbNavOutlet"],[1,"col-md-6","d-flex","flex-column","overflow-auto"],[1,"bg-dark","text-white","p-3","d-flex","align-items-center","justify-content-between"],[1,"mb-0"],[1,"btn","btn-success",3,"click"],[1,"overflow-auto","h-50"],[1,"h-100","w-100",3,"ngModelChange","options","ngModel"],[3,"code","exampleInput"],[1,"mb-3"],[1,"card"],[1,"card-body"],[3,"submissionSelected","questionId"],[3,"submissionInput"]],template:function(e,n){if(e&1&&(N(0),C(1,Te,26,7,"div",1)),e&2){let l=L(n.codingQuestion());a(),h(l?1:-1)}},dependencies:[fe,G,B,j,A,Se,de,pe,ce,ue,Ce,ge,be,J,H],encapsulation:2,changeDetection:0})};export{ve as CodingQuestionStartComponent};
