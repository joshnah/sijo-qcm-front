"use strict";(self.webpackChunksijo_qcm_front=self.webpackChunksijo_qcm_front||[]).push([[76],{593:(l,c,s)=>{s.d(c,{p:()=>_});var u=s(4438),a=s(7673),h=s(8810),f=s(1562),o=s(9437),E=s(8141),z=s(6354);let _=(()=>{class n{http=(0,u.WQX)(f.Qq);constructor(){}quizzesSignal=(0,u.vPA)([]);quizzes=this.quizzesSignal.asReadonly();submit(t,r){const e=Object.fromEntries(Object.entries(t).map(([i,p])=>[i,Array.from(p)]));return this.http.post("/submissions",{answers:e,quizId:r}).pipe((0,o.W)(i=>{throw"Error while fetching /submissions: "+i}))}fetchQuizzes(){return this.http.get("/quizzes").pipe((0,E.M)(t=>{this.quizzesSignal.set(t)}))}fetchQuizInfo(t){const r=this.quizzes().find(e=>e._id===t);return r?(0,a.of)(r):this.http.get(`/quizzes/${t}?type=info`).pipe((0,o.W)(e=>(console.error("Error while fetching quiz info:",e),(0,h.$)(()=>new Error("Error while fetching quiz info: "+e)))))}fetchQuizWithQuestions(t){return this.http.get(`/quizzes/${t}?type=questions`).pipe((0,o.W)(r=>(console.error("Error while fetching quiz questions:",r),(0,h.$)(()=>new Error("Error while fetching quiz questions: "+r)))))}fetchSubmission(t){return this.http.get(`/submissions/${t}`).pipe((0,z.T)(r=>(r.answers=this.transformToQuizAnswer(r.answers),r.correctAnswers=this.transformToQuizAnswer(r.correctAnswers),r)),(0,o.W)(r=>{throw"Error while fetching /submissions "+r}))}transformToQuizAnswer(t){const r={};for(const[e,i]of Object.entries(t))r[e]=new Set(i);return r}static \u0275fac=function(r){return new(r||n)};static \u0275prov=u.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()}}]);