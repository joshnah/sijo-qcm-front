import{a as fe}from"./chunk-JRATPDQ4.js";import{a as ae}from"./chunk-CVNQIEP5.js";import{a as P}from"./chunk-2QQHY5FA.js";import{a as le,d as me,e as j,h as A,k as B,r as de,s as ue,t as ce,u as pe,v as ge,w as be,y as Ce,z as Se}from"./chunk-A3T46DET.js";import{a as D}from"./chunk-J4R3TENS.js";import{g as re}from"./chunk-HB4LE65O.js";import{Bb as k,Cb as M,Db as V,Eb as N,Fb as L,Gb as v,Ia as a,Kb as q,L as R,Lb as ne,Mb as $,Pa as T,S as Y,Sa as f,Tb as oe,Xa as b,bb as C,ca as c,eb as h,ec as se,fc as O,gb as ee,hb as te,ib as o,ja as p,jb as t,ka as g,kb as F,lb as I,nb as E,ob as m,ua as Z,va as _,wb as ie,xb as s,yb as S,zb as u}from"./chunk-I64YHXKP.js";var _e=(r,i)=>i.codingSubmissionId;function he(r,i){if(r&1){let e=I();o(0,"button",2),E("click",function(){let l=p(e).$implicit,d=m();return g(d.onSubmissionClick(l))}),o(1,"div",3)(2,"h5",4),s(3),t(),o(4,"small"),s(5),q(6,"date"),t()(),o(7,"p",4),s(8),t(),o(9,"small"),s(10),t()()}if(r&2){let e=i.$implicit;a(3),u("Submission #",e.codingSubmissionId,""),a(2),S($(6,4,e.createdAt,"short")),a(3),u("Language: ",e.language,""),a(2),u(" Score: ",e.score*100,"/100")}}var W=class r{codingQuestionsService=c(D);questionId=_.required();codingSubmissions$;submissionSelected=Z();constructor(){this.codingSubmissions$=le(this.questionId).pipe(Y(i=>this.codingQuestionsService.fetchAllSubmissionsByQuestion(i)))}onSubmissionClick(i){this.submissionSelected.emit(i)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["app-coding-submissions-list"]],inputs:{questionId:[1,"questionId"]},outputs:{submissionSelected:"submissionSelected"},decls:4,vars:2,consts:[[1,"list-group"],["type","button",1,"list-group-item","list-group-item-action"],["type","button",1,"list-group-item","list-group-item-action",3,"click"],[1,"d-flex","w-100","justify-content-between"],[1,"mb-1"]],template:function(e,n){e&1&&(o(0,"div",0),ee(1,he,11,7,"button",1,_e),q(3,"async"),t()),e&2&&(a(),te(ne(3,0,n.codingSubmissions$)))},dependencies:[se,O],encapsulation:2,changeDetection:0})};function Ie(r,i){if(r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),s(6,"Submission Details"),t()(),o(7,"div",5)(8,"h5",6),s(9),t(),o(10,"div",7)(11,"strong"),s(12,"Submitted on:"),t(),s(13),q(14,"date"),t(),o(15,"div",7)(16,"strong"),s(17,"Score:"),t(),s(18),t(),o(19,"div",7)(20,"strong"),s(21,"Language:"),t(),s(22),t(),o(23,"div",7)(24,"strong"),s(25,"User Code:"),t(),o(26,"pre",8),s(27),t()()()(),o(28,"div",9)(29,"div",4)(30,"h5"),s(31,"Additional Information"),t()(),o(32,"ul",10)(33,"li",11)(34,"strong"),s(35,"Question ID:"),t(),s(36),t(),o(37,"li",11)(38,"strong"),s(39,"User ID:"),t(),s(40),t()()()(),o(41,"div",12)(42,"div",3)(43,"div",4)(44,"h5"),s(45,"Actions"),t()(),o(46,"div",5)(47,"button",13),s(48," Download Code "),t(),o(49,"button",14),s(50," Review Submission "),t()()()()()()),r&2){m();let e=v(0);a(9),u(" Submission ID: ",e.codingSubmissionId," "),a(4),u(" ",$(14,7,e.createdAt,"medium")," "),a(5),u(" ",e.score*100,"/100 "),a(4),u(" ",e.language," "),a(5),u("",e.userCode,`
            `),a(9),u(" ",e.questionId," "),a(4),u(" ",e.userId," ")}}var G=class r{submissionInput=_();static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["app-coding-submission-details"]],inputs:{submissionInput:[1,"submissionInput"]},decls:2,vars:2,consts:[[1,"container","mt-4",2,"height","500px"],[1,"row"],[1,"col-md-8"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"mb-3"],[1,"bg-light","p-3"],[1,"card","mt-3"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"col-md-4"],[1,"btn","btn-primary","btn-block","mb-2"],[1,"btn","btn-success","btn-block","mb-2"]],template:function(e,n){if(e&1&&(N(0),b(1,Ie,51,10,"div",0)),e&2){let l=L(n.submissionInput());a(),h(l?1:-1)}},dependencies:[O],encapsulation:2,changeDetection:0})};function we(r,i){if(r&1&&(o(0,"div",2)(1,"h5",8),s(2,"Compile Errors"),t(),o(3,"pre",9),s(4),t()()),r&2){m(2);let e=v(10);a(4),S(e.compile_output)}}function ye(r,i){if(r&1&&(o(0,"div",2)(1,"h5",10),s(2,"Stdout"),t(),o(3,"pre",9),s(4),t()(),o(5,"div",2)(6,"h5",11),s(7,"Stderr"),t(),o(8,"pre",9),s(9),t()()),r&2){m(2);let e=v(10);a(4),S(e.stdout),a(5),S(e.stderr)}}function Ne(r,i){if(r&1&&(o(0,"div",7),b(1,we,5,1,"div",2)(2,ye,10,2),t()),r&2){let e=m();a(),h(e.hasErrorCompilation()?1:2)}}var H=class r{code=_("");exampleInput=_();codingQuestionsService=c(D);output=T(null);stdin=oe(()=>this.exampleInput());spinner=c(P);executeCode(){this.spinner.openGlobalSpinner(),this.codingQuestionsService.executeCode(this.code(),"java",this.stdin()).pipe(R(()=>{this.spinner.closeGlobalSpinner()})).subscribe(i=>{console.log(i),this.output.set(i)})}hasErrorCompilation(){return this.output()?.status?.id===6}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["app-code-run"]],inputs:{code:[1,"code"],exampleInput:[1,"exampleInput"]},decls:12,vars:4,consts:[[1,"container"],[1,"bg-light","p-3"],[1,"mb-3"],[1,"form-group"],["for","testCaseInput"],["id","testCaseInput","rows","3",1,"form-control",3,"ngModelChange","placeholder","ngModel"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"bg-dark","text-white","p-4","rounded","shadow-sm","mt-4"],[1,"text-danger"],[1,"bg-light","text-dark","p-3","rounded"],[1,"text-success"],[1,"text-warning"]],template:function(e,n){if(e&1){let l=I();o(0,"div",0)(1,"div",1)(2,"h5",2),s(3,"Test Case Input"),t(),o(4,"div",3)(5,"label",4),s(6,"Enter Test Case Input:"),t(),o(7,"textarea",5),V("ngModelChange",function(Q){return p(l),M(n.stdin,Q)||(n.stdin=Q),g(Q)}),t()(),o(8,"button",6),E("click",function(){return p(l),g(n.executeCode())}),s(9," Run Code "),t()(),N(10),b(11,Ne,3,1,"div",7),t()}if(e&2){a(7),C("placeholder",n.exampleInput()),k("ngModel",n.stdin),a(3);let l=L(n.output());a(),h(l?11:-1)}},dependencies:[B,me,j,A],encapsulation:2,changeDetection:0})};var J=class{static generateJavaCode(i,e){let n="",{arguments:l,returnType:d}=e;n+=`import java.util.*;

`;let Q=l.map(y=>`${y.type} ${y.name}`).join(", ");n+=`class Solution {
    public ${d} ${i.functionName}(${Q}) {
        // TODO: Implement this function
        return null; // Replace with appropriate return value
    }
}
`,n+=`public class Main {
`,n+=`    public static void main(String[] args) {
`,n+=`        Scanner scanner = new Scanner(System.in);
`;let U=i.functionSignatures.find(y=>y.language==="java");if(!U)throw new Error("No Java function signature found");let xe=U.arguments,w="";return xe.forEach(y=>{let{type:X,name:x}=y;switch(X){case"List<Integer>":w+=`
        String listInput = scanner.nextLine().trim();
        List<Integer> ${x} = new ArrayList<>();
        listInput = listInput.substring(1, listInput.length() - 1); // Remove brackets
        if (!listInput.isEmpty()) {
            for (String num : listInput.split(",")) {
                ${x}.add(Integer.parseInt(num.trim()));
            }
        }
          `;break;case"Integer":case"int":w+=`        int ${x} = Integer.parseInt(scanner.nextLine().trim());
`;break;case"boolean":w+=`        boolean ${x} = Boolean.parseBoolean(scanner.nextLine().trim());
`;break;case"String":w+=`        String ${x} = scanner.nextLine().trim();
`;break;case"List<String>":w+=`
        String listInputStr = scanner.nextLine().trim();
        List<String> ${x} = new ArrayList<>();
        listInputStr = listInputStr.substring(1, listInputStr.length() - 1); // Remove brackets
        if (!listInputStr.isEmpty()) {
            for (String str : listInputStr.split(",")) {
                ${x}.eadd(str.trim());
            }
        }
          `;break;default:throw new Error(`Unsupported argument type: ${X}`)}}),n+=w,n+=`        Solution solution = new Solution();
`,n+=`        ${this.generateFunctionCall(U,i.functionName)}
`,n+=`    }
`,n+=`}
`,n}static generateFunctionCall(i,e){let n=`${i.returnType} result = solution.${e}(`;return i.arguments.forEach((l,d)=>{n+=l.name,d<i.arguments.length-1&&(n+=", ")}),n+=`);
`,n+="        System.out.println(result);",n}};function Le(r,i){if(r&1&&(o(0,"h2",17),s(1),t(),o(2,"div",18)(3,"div",19)(4,"p",12),s(5),t()()()),r&2){m(2);let e=v(0);a(),S(e.title),a(4),S(e.description)}}function De(r,i){if(r&1){let e=I();o(0,"app-coding-submissions-list",20),E("submissionSelected",function(l){p(e);let d=m(2);return g(d.selectSubmission(l))}),t()}if(r&2){m(2);let e=v(0);C("questionId",e.id)}}function Qe(r,i){if(r&1&&F(0,"app-coding-submission-details",21),r&2){let e=m(2);C("submissionInput",e.currentSubmission())}}function Te(r,i){if(r&1){let e=I();o(0,"div",1)(1,"div",2)(2,"ul",3,0),V("activeIdChange",function(l){p(e);let d=m();return M(d.active,l)||(d.active=l),g(l)}),o(4,"li",4)(5,"button",5),s(6,"Description"),t(),b(7,Le,6,2,"ng-template",6),t(),o(8,"li",7)(9,"button",5),s(10,"History"),t(),b(11,De,1,1,"ng-template",6),t(),o(12,"li",8)(13,"button",5),s(14,"Submissions"),t(),b(15,Qe,1,1,"ng-template",6),t()(),F(16,"div",9),t(),o(17,"div",10)(18,"div",11)(19,"h5",12),s(20,"Code Editor"),t(),o(21,"button",13),E("click",function(){p(e);let l=m();return g(l.submitSolution())}),s(22," Submit Solution "),t()(),o(23,"div",14)(24,"ngx-monaco-editor",15),V("ngModelChange",function(l){p(e);let d=m();return M(d.code,l)||(d.code=l),g(l)}),t()(),F(25,"app-code-run",16),t()()}if(r&2){let e=ie(3),n=m();a(2),C("destroyOnHide",!1),k("activeId",n.active),a(14),C("ngbNavOutlet",e),a(8),C("options",n.editorOptions),k("ngModel",n.code),a(),C("code",n.code)("exampleInput",n.createExampleInput())}}var ve=class r{codingQuestionsService=c(D);alertService=c(ae);codingQuestion=T(null);active="description";currentSubmission=T(null);route=c(re);spinner=c(P);ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&this.codingQuestionsService.getCodingQuestion(i).subscribe(e=>{this.codingQuestion.set(e),this.code=this.generateFunctionTemplate(e,"java")})}editorOptions={language:"java"};code="";submitSolution(){this.codingQuestion&&(this.spinner.openGlobalSpinner(),this.codingQuestionsService.submitCodingQuestion(this.codingQuestion().id,"java",this.code).pipe(R(()=>{this.spinner.closeGlobalSpinner()})).subscribe({next:i=>{this.alertService.setMessage({type:"success",message:"Code has been submitted"}),this.selectSubmission(i)}}))}createExampleInput(){return this.codingQuestion()?.testCases[0]?.input}selectSubmission(i){this.currentSubmission.set(i),this.navigateToSubmissionTab()}generateFunctionTemplate(i,e){let n=i.functionSignatures.find(l=>l.language.toLowerCase()===e.toLowerCase());if(!n)throw new Error(`Function signature not found for language: ${e}`);return J.generateJavaCode(i,n)}navigateToSubmissionTab(){this.active="submission-detail"}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["app-coding-question-start"]],decls:2,vars:2,consts:[["nav","ngbNav"],[1,"container-fluid","h-100","row"],[1,"col-md-6","bg-light","overflow-auto"],["ngbNav","",1,"nav-tabs",3,"activeIdChange","destroyOnHide","activeId"],["ngbNavItem","description"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","submissions-list"],["ngbNavItem","submission-detail"],[1,"mt-2",3,"ngbNavOutlet"],[1,"col-md-6","d-flex","flex-column","overflow-auto"],[1,"bg-dark","text-white","p-3","d-flex","align-items-center","justify-content-between"],[1,"mb-0"],[1,"btn","btn-success",3,"click"],[1,"overflow-auto","h-50"],[1,"h-100","w-100",3,"ngModelChange","options","ngModel"],[3,"code","exampleInput"],[1,"mb-3"],[1,"card"],[1,"card-body"],[3,"submissionSelected","questionId"],[3,"submissionInput"]],template:function(e,n){if(e&1&&(N(0),b(1,Te,26,7,"div",1)),e&2){let l=L(n.codingQuestion());a(),h(l?1:-1)}},dependencies:[fe,H,B,j,A,Se,de,pe,ce,ue,be,ge,Ce,W,G],encapsulation:2,changeDetection:0})};export{ve as CodingQuestionStartComponent};
