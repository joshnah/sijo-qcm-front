import{a as Q}from"./chunk-RTGK32CX.js";import{a as I}from"./chunk-WOEHKPTP.js";import{f as E}from"./chunk-QDBR6KCD.js";import{Ab as q,Eb as y,Ia as s,Pa as v,S as h,Sa as g,Xa as p,ca as m,cb as C,eb as b,gb as f,hb as _,ib as n,jb as o,kb as z,ob as d,rb as x,xb as a,yb as w,zb as u}from"./chunk-I64YHXKP.js";var F=(i,t)=>t.id;function T(i,t){i&1&&(n(0,"span",10),a(1," \u274C "),o())}function $(i,t){i&1&&(n(0,"span",11),a(1," \u2713 "),o())}function M(i,t){if(i&1&&(y(0)(1),n(2,"div",7),z(3,"input",8),n(4,"label",9),a(5),o(),p(6,T,2,0,"span",10)(7,$,2,0,"span",11),o()),i&2){let e=t.$implicit,r=d().$implicit,S=d(2),l=S.isAnswerselected(r.id,e.id),c=S.isCorrectAnswer(r.id,e.id);s(3),x("id","",r.id,"answer",e.id,""),s(),C("btn-success",l&&c)("btn-outline-primary",!l&&!c)("btn-outline-success",!l&&c)("btn-danger",l&&!c),x("for","",r.id,"answer",e.id,""),s(),u(" ",e.option," "),s(),b(!c&&l?6:c&&l?7:-1)}}function D(i,t){if(i&1&&(n(0,"h3"),a(1),o(),n(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),a(6),o(),n(7,"form",6),f(8,M,8,16,"div",7,F),o()()()()),i&2){let e=t.$implicit,r=t.$index;s(),u("Question ",r,""),s(5),u(" ",e.text," "),s(2),_(e.answers)}}function O(i,t){if(i&1&&(n(0,"h2"),a(1,"Result"),o(),n(2,"h3"),a(3),o(),n(4,"h3"),a(5),o(),f(6,D,10,2,null,null,F)),i&2){let e=d();s(3),w(e.quiz.title),s(2),q(" Score: ",e.getScore()," (",e.getDetailScore(),") "),s(),_(e.quiz.questions)}}function k(i,t){i&1&&(n(0,"div",1)(1,"span",12),a(2,"Loading..."),o()())}var A=class i{submissionService=m(Q);quizService=m(I);route=m(E);quiz;submission;loading=v(!0);ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&this.loadSubmissionAndQuiz(t)}isAnswerselected(t,e){return this.submission?.answers[t].has(e)}isCorrectAnswer(t,e){return this.submission?.correctAnswers[t].has(e)}getScore(){return this.submission.score*100}getDetailScore(){return`${this.submission.score*this.quiz.questions.length} / ${this.quiz.questions.length}`}loadSubmissionAndQuiz(t){this.submissionService.fetchSubmission(t).pipe(h(e=>(this.submission=e,this.quizService.fetchQuizWithQuestions(e.quizId)))).subscribe({next:e=>{this.quiz=e,this.loading.set(!1)},error:e=>{console.error("Error loading submission or quiz:",e),this.loading.set(!1)}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=g({type:i,selectors:[["app-submission"]],decls:3,vars:1,consts:[[1,"flex-column","text-center"],["role","status",1,"spinner-border","text-primary"],[1,"container","mt-4"],[1,"card","shadow","p-3","mb-4"],[1,"card-body"],[1,"card-title","border","rounded","p-3",2,"white-space","pre-wrap","max-height","500px","overflow-y","auto"],[1,"d-flex","flex-column","gap-3"],[1,"btn-group"],["type","checkbox","disabled","",1,"btn-check",3,"id"],[1,"btn","btn-lg","text-start","border-2","align-content-center",3,"for"],["aria-label","Wrong answer",1,"d-flex","justify-content-center","align-items-center","display-5","ms-2","text-danger"],["aria-label","Correct answer or not selected",1,"d-flex","justify-content-center","align-items-center","display-5","ms-2","text-success"],[1,"visually-hidden"]],template:function(e,r){e&1&&(n(0,"div",0),p(1,O,8,3)(2,k,3,0,"div",1),o()),e&2&&(s(),b(!r.loading()&&r.submission&&r.quiz?1:2))},styles:[".btn-check[_ngcontent-%COMP%]:disabled + .btn[_ngcontent-%COMP%]{pointer-events:none;cursor:default;opacity:1}"]})};export{A as SubmissionComponent};
